function new_question(e){question.innerHTML=questionHTML(e.question)}function append_error(e){var t='<section id="message" class="message message--error" role="alertdialog" aria-labelledby="message__title" aria-describedby="enp-message__list"><h3 class="message__title message__title--error">Error</h3><ul class="enp-message__list"><li class="enp-message__item">'+e[0]+"</li></ul></section>";btn.insertAdjacentHTML("afterend",t)}function nextState(e){currentQuestion()!==totalQuestions?(e.preventDefault(),formData=new FormData(form),formData.append("ajax",!0),request.open("POST",form.action),request.send(formData),question.focus()):btn.click()}function questionHTML(e){var t="<legend>"+e.question+"</legend>";return t+=expressionHTML(e.expression[0])+expressionHTML(e.expression[1])}function expressionHTML(e){return'<label class="exp"><input class="exp_input" type="radio" name="expression" value="'+e.name+'" /><img class="face" src="dist/img/'+e.image+'" alt="'+e.description+'" /></label>'}function updateValues(e){updateValue("ac",e.answered_correctly),updateValue("e_ac",e.easy_answered_correctly),updateValue("i_ac",e.intermediate_answered_correctly),updateValue("h_ac",e.hard_answered_correctly),updateValue("who_ac",e.who_answered_correctly),updateValue("which_ac",e.which_answered_correctly),updateValue("q_id",e.current_question_number)}function updateValue(t,n){e=document.getElementById(t),e.value=n}function updateProgressbar(){progressCqn.innerText=currentQuestion(),progressBar.style.width=currentQuestion()/totalQuestions*100+"%"}function currentQuestion(){return parseInt(document.getElementById("q_id").value)+1}function nextQuestionListener(e){if(!e.target||!e.target.matches("input.exp_input"))return!1;var t=e.x||e.clientX,n=e.y||e.clientY;t||n?nextState(e):13===e.keyCode&&(e.target.checked!==!0&&(e.target.checked=!0),nextState(e))}var btn=document.getElementById("btn--submit"),form=document.getElementById("assessment"),question=document.getElementById("question"),progressCqn=document.getElementById("progress__cqn"),progressBar=document.getElementById("progressbar"),totalQuestions=parseInt(document.getElementById("tq").value),request=new XMLHttpRequest;request.onreadystatechange=function(){var e=document.getElementById("message");null!==e&&e.parentNode.removeChild(e),4===request.readyState&&200===request.status&&(json=JSON.parse(request.responseText),json.error.length?append_error(json.error):(new_question(json),updateValues(json),updateProgressbar()))},btn.className="hidden",question.addEventListener("click",nextQuestionListener),question.addEventListener("keydown",nextQuestionListener);